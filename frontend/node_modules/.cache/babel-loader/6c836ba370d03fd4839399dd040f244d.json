{"ast":null,"code":"import _classCallCheck from\"/home/jeffrey/Code/react/blog-project/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jeffrey/Code/react/blog-project/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/jeffrey/Code/react/blog-project/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jeffrey/Code/react/blog-project/frontend/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from\"react\";import{Redirect}from\"react-router-dom\";import TagList from\"./blog-post-preview/TagList\";import axios from\"axios\";import{getDate,getTime}from\"../../assets/utils\";import{SERVER_URL}from\"../../config\";var DoRedirect=function DoRedirect(props){if(!props.redirect){return null;}else{return/*#__PURE__*/_jsx(Redirect,{to:\"/invalid\"});}};var DoRender=function DoRender(_ref){var post=_ref.post;if(!post||post.error){return null;}else{return/*#__PURE__*/_jsx(\"div\",{className:\"card preview-post mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"card-title primary\",children:post.title}),/*#__PURE__*/_jsx(\"p\",{className:\"card-subtitle text-muted\",children:\"\".concat(post.date,\" \").concat(post.time)}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",dangerouslySetInnerHTML:{__html:post.content}}),/*#__PURE__*/_jsx(TagList,{tags:post.tags})]})});}};var Post=/*#__PURE__*/function(_Component){_inherits(Post,_Component);var _super=_createSuper(Post);function Post(props){var _this;_classCallCheck(this,Post);_this=_super.call(this,props);_this.state={post:undefined,redirect:false};return _this;}_createClass(Post,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(DoRedirect,{redirect:this.state.redirect}),/*#__PURE__*/_jsx(DoRender,{post:this.state.post})]});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(\"\".concat(SERVER_URL,\"/posts/id/\").concat(this.props.match.params.id)).then(function(post){if(post.data.error)_this2.setState({redirect:true});else{_this2.setState({post:{title:post.data.title,date:getDate(post.data.posted_on),time:getTime(post.data.posted_on),content:post.data.content,tags:post.data.tags}});}});}}]);return Post;}(Component);export default Post;","map":{"version":3,"sources":["/home/jeffrey/Code/react/blog-project/frontend/src/components/main/Post.js"],"names":["React","Component","Redirect","TagList","axios","getDate","getTime","SERVER_URL","DoRedirect","props","redirect","DoRender","post","error","title","date","time","__html","content","tags","Post","state","undefined","get","match","params","id","then","data","setState","posted_on"],"mappings":"4kBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,OAAP,KAAoB,6BAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,CAAkBC,OAAlB,KAAiC,oBAAjC,CACA,OAASC,UAAT,KAA2B,cAA3B,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,KAAD,CAAW,CAC5B,GAAI,CAACA,KAAK,CAACC,QAAX,CAAqB,CACnB,MAAO,KAAP,CACD,CAFD,IAEO,CACL,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,UAAb,EAAP,CACD,CACF,CAND,CAQA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAAc,IAAXC,CAAAA,IAAW,MAAXA,IAAW,CAC7B,GAAI,CAACA,IAAD,EAASA,IAAI,CAACC,KAAlB,CAAyB,CACvB,MAAO,KAAP,CACD,CAFD,IAEO,CACL,mBACE,YAAK,SAAS,CAAC,wBAAf,uBACE,aAAK,SAAS,CAAC,WAAf,wBACE,UAAG,SAAS,CAAC,oBAAb,UAAmCD,IAAI,CAACE,KAAxC,EADF,cAEE,UAAG,SAAS,CAAC,0BAAb,oBAA4CF,IAAI,CAACG,IAAjD,aAAyDH,IAAI,CAACI,IAA9D,GAFF,cAIE,YACE,SAAS,CAAC,MADZ,CAEE,uBAAuB,CAAE,CAAEC,MAAM,CAAEL,IAAI,CAACM,OAAf,CAF3B,EAJF,cAQE,KAAC,OAAD,EAAS,IAAI,CAAEN,IAAI,CAACO,IAApB,EARF,GADF,EADF,CAcD,CACF,CAnBD,C,GAqBMC,CAAAA,I,4FACJ,cAAYX,KAAZ,CAAmB,sCACjB,uBAAMA,KAAN,EAEA,MAAKY,KAAL,CAAa,CACXT,IAAI,CAAEU,SADK,CAEXZ,QAAQ,CAAE,KAFC,CAAb,CAHiB,aAOlB,C,wDAEQ,CACP,mBACE,MAAC,KAAD,CAAO,QAAP,yBACE,KAAC,UAAD,EAAY,QAAQ,CAAE,KAAKW,KAAL,CAAWX,QAAjC,EADF,cAEE,KAAC,QAAD,EAAU,IAAI,CAAE,KAAKW,KAAL,CAAWT,IAA3B,EAFF,GADF,CAMD,C,6DAEmB,iBAClBR,KAAK,CACFmB,GADH,WACUhB,UADV,sBACiC,KAAKE,KAAL,CAAWe,KAAX,CAAiBC,MAAjB,CAAwBC,EADzD,GAEGC,IAFH,CAEQ,SAACf,IAAD,CAAU,CACd,GAAIA,IAAI,CAACgB,IAAL,CAAUf,KAAd,CAAqB,MAAI,CAACgB,QAAL,CAAc,CAAEnB,QAAQ,CAAE,IAAZ,CAAd,EAArB,IACK,CACH,MAAI,CAACmB,QAAL,CAAc,CACZjB,IAAI,CAAE,CACJE,KAAK,CAAEF,IAAI,CAACgB,IAAL,CAAUd,KADb,CAEJC,IAAI,CAAEV,OAAO,CAACO,IAAI,CAACgB,IAAL,CAAUE,SAAX,CAFT,CAGJd,IAAI,CAAEV,OAAO,CAACM,IAAI,CAACgB,IAAL,CAAUE,SAAX,CAHT,CAIJZ,OAAO,CAAEN,IAAI,CAACgB,IAAL,CAAUV,OAJf,CAKJC,IAAI,CAAEP,IAAI,CAACgB,IAAL,CAAUT,IALZ,CADM,CAAd,EASD,CACF,CAfH,EAgBD,C,kBApCgBlB,S,EAuCnB,cAAemB,CAAAA,IAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport TagList from \"./blog-post-preview/TagList\";\nimport axios from \"axios\";\nimport { getDate, getTime } from \"../../assets/utils\";\nimport { SERVER_URL } from \"../../config\";\n\nconst DoRedirect = (props) => {\n  if (!props.redirect) {\n    return null;\n  } else {\n    return <Redirect to=\"/invalid\" />;\n  }\n};\n\nconst DoRender = ({ post }) => {\n  if (!post || post.error) {\n    return null;\n  } else {\n    return (\n      <div className=\"card preview-post mb-3\">\n        <div className=\"card-body\">\n          <p className=\"card-title primary\">{post.title}</p>\n          <p className=\"card-subtitle text-muted\">{`${post.date} ${post.time}`}</p>\n\n          <div\n            className=\"mb-4\"\n            dangerouslySetInnerHTML={{ __html: post.content }}\n          />\n          <TagList tags={post.tags} />\n        </div>\n      </div>\n    );\n  }\n};\n\nclass Post extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      post: undefined,\n      redirect: false,\n    };\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <DoRedirect redirect={this.state.redirect} />\n        <DoRender post={this.state.post} />\n      </React.Fragment>\n    );\n  }\n\n  componentDidMount() {\n    axios\n      .get(`${SERVER_URL}/posts/id/${this.props.match.params.id}`)\n      .then((post) => {\n        if (post.data.error) this.setState({ redirect: true });\n        else {\n          this.setState({\n            post: {\n              title: post.data.title,\n              date: getDate(post.data.posted_on),\n              time: getTime(post.data.posted_on),\n              content: post.data.content,\n              tags: post.data.tags,\n            },\n          });\n        }\n      });\n  }\n}\n\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}